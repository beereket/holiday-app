<div class="search-container">
  <mat-form-field appearance="outline" class="search-field">
    <mat-label>Search countries</mat-label>
    <input matInput
           [formControl]="searchControl"
           placeholder="Type to search..."
           autocomplete="off">
  </mat-form-field>
</div>

<div *ngIf="loading$ | async" class="loading-container">
  <mat-spinner diameter="50"></mat-spinner>
  <p>Loading countries...</p>
</div>

<div *ngIf="error$ | async as error" class="error-container">
  <p class="error-message">Error: {{ error }}</p>
</div>

<div  *ngIf="(loading$ | async) === false && !(error$ | async)">
  <div class="country-list" *ngIf="filteredCountries$ | async as countries">
    <div class="country-cards-container" *ngFor="let country of countries">
      <div class="country-card-wrapper">
        <app-country-card [countryCode]="country.countryCode"></app-country-card>
        <button 
          mat-icon-button 
          class="favourite-button"
          [class.favourite-active]="isFavourite$(country.countryCode) | async"
          (click)="toggleFavourite(country.countryCode)"
          [attr.aria-label]="(isFavourite$(country.countryCode) | async) ? 'Remove from favourites' : 'Add to favourites'">
          <mat-icon>{{ (isFavourite$(country.countryCode) | async) ? 'favorite' : 'favorite_border' }}</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
